

CREATE TABLE SERVICIORESERVAS 
(
  ID NUMBER,
  FECHAINICIAL DATE,
  FECHAFINAL DATE,
  IDHABITACION NUMBER, 
  IDSPA NUMBER,
  IDSALON NUMBER,
  IDLAVANDERIA NUMBER,
  CONSTRAINT SERVICIORESERVAS_PK PRIMARY KEY (ID));


--Tabla SPA
CREATE TABLE SPAS
(ID NUMBER,
DURACION NUMBER,
COSTO NUMBER,
CAPACIDAD NUMBER,
DISPONIBILIDAD NUMBER,
CONSTRAINT SPA_PK PRIMARY KEY (ID));



-- Tabla Producto
CREATE TABLE PRODUCTOS
(ID NUMBER, 
COSTO NUMBER,
NOMBRE VARCHAR2(255 BYTE),
  --RESTAURANTEID NUMBER,
  --TIENDAID NUMBER,
  --SUPERMERCADOID NUMBER,
  --BARID NUMBER,
  --SERVICIOCONSUMOID NUMBER, 
CONSTRAINT PRODUCTOS_PK PRIMARY KEY (ID));
	 


-- Tabla Usuario
CREATE TABLE USUARIOS
(
  ID NUMBER,
  NOMBRE VARCHAR2(255 BYTE),
  DOCUMENTO VARCHAR2(255 BYTE),
  TIPODOCUMENTO VARCHAR2(255 BYTE),
  ROL VARCHAR2(255 BYTE),
  CORREO VARCHAR2(255 BYTE),
  CONTRASENA VARCHAR2(255 BYTE),
  CONSTRAINT USUARIOS_PK PRIMARY KEY (ID));



-- Tabla Hotel
CREATE TABLE HOTELES
(
  ID NUMBER,
  NOMBRE VARCHAR2(255 BYTE),
  TIPO VARCHAR2(255 BYTE), 
  ESTRELLAS NUMBER, 
  CATEGORIA VARCHAR2(255 BYTE), 
  CIUDAD VARCHAR2(255 BYTE), 
  CONSTRAINT HOTELES_PK PRIMARY KEY (ID));



-- Tabla Plan
CREATE TABLE PLANES 
(
  ID NUMBER,
  TIPO VARCHAR2(255 BYTE),
  HORARIO DATE,
  DESCRIPCION VARCHAR2(255 BYTE),
  --HOTELID NUMBER,
  CONSTRAINT PLANES_PK PRIMARY KEY (ID));




-- Tabla Reserva
CREATE TABLE RESERVAS
(
  ID NUMBER,
  FECHA DATE,
  FECHAFINAL DATE, 
  PERSONAS NUMBER,
  habtacionid  NUMBER,
  PLANESID NUMBER,
  USUARIOID NUMBER,
  CONSTRAINT RESERVAS_PK PRIMARY KEY (ID));



-- Tabla Habitacion
CREATE TABLE HABITACIONES 
(
  ID NUMBER,
  CAPACIDAD NUMBER,
  TIPO VARCHAR2(255 BYTE), 
  DOTACION VARCHAR2(255 BYTE), 
  PRECIONOCHE NUMBER,
  CONSUMOEXTRA NUMBER,
  HOTELID NUMBER,
  RESERVAID NUMBER,
  USUARIOID NUMBER,
  SERVICIOCONSUMOID NUMBER,
  CONSTRAINT HABITACIONES_PK PRIMARY KEY (ID));

  
  
-- Tabla Lavanderia
CREATE TABLE LAVANDERIAS 
(
  ID NUMBER,
  TIPOPRENDA VARCHAR2(255 BYTE),
  NUMEROPRENDAS NUMBER, 
  PARESZAPATOS NUMBER, 
  COSTO NUMBER,

  CONSTRAINT LAVANDERIAS_PK PRIMARY KEY (ID));
  
  
  
-- Tabla Salon
CREATE TABLE SALONES 
(
  ID NUMBER,
  CAPACIDAD NUMBER,
  TIPO VARCHAR2(255 BYTE), 
  COSTOHORA NUMBER, 
  LIMPIEZA NUMBER,
  EQUIPOS NUMBER,
  --DISPONIBILDAD VARCHAR2(255 BYTE),
  CONSTRAINT SALONES_PK PRIMARY KEY (ID));


  
-- Tabla Utileria
CREATE TABLE UTILERIA 
(
  ID NUMBER,
  NOMBRE VARCHAR2(255 BYTE),
  COSTOPENALIZACION NUMBER,
  --HABITACIONID NUMBER,
  CONSTRAINT UTILERIA_PK PRIMARY KEY (ID));


  
  
  
  
-- Tabla Factura
CREATE TABLE FACTURAS
(
  ID NUMBER,
  precioTotal NUMBER, 
  --RESERVASID NUMBER,
  CONSTRAINT FACTURAS_PK PRIMARY KEY (ID));
  


  
  CREATE TABLE REGISTROS 
(
  ID NUMBER,
  LLEGADA DATE,
  SALIDA DATE,
  IDRESERVA NUMBER, 
  IDUSUARIO NUMBER,
  CONSTRAINT REGISTRO_PK PRIMARY KEY (ID));


  
  
CREATE TABLE SERVICIOSCONSUMO 
(
  ID NUMBER,
  DESCRIPCION VARCHAR2(255 BYTE),
  COSTO NUMBER,
  FECHA DATE, 
  IDHABITACION NUMBER,
  IDPRODUCTO NUMBER,
  CONSTRAINT SERVICIOSCONSUMO_PK PRIMARY KEY (ID));
  


CREATE TABLE PISCINA
( 
  ID NUMBER,
  PROFUNDIDAD NUMBER,
  COSTO NUMBER,
  CAPACIDAD NUMBER,
  DISPONIBILDAD VARCHAR2(255),
  HOTELID NUMBER,
  CONSTRAINT PISCINA_PK PRIMARY KEY (ID));



CREATE TABLE INTERNET
( 
  ID NUMBER,
  CAPACIDAD NUMBER,
  COSTODIARIO NUMBER,
  HOTELID NUMBER,
  CONSTRAINT INTERNET_PK PRIMARY KEY (ID));



CREATE TABLE GIMNASIO
( 
  ID NUMBER,
  MAQUINAS NUMBER,
  HORARIO VARCHAR2(255 BYTE),
  CAPACIDAD NUMBER,
  HOTELID NUMBER,
  CONSTRAINT GIMNASIO_PK PRIMARY KEY (ID));


CREATE TABLE BARES
( 
  ID NUMBER,
  CAPACIDAD NUMBER,
  ESTILO VARCHAR2(255),
  NOMBRE VARCHAR2(255),
  HOTELID NUMBER,
  CONSTRAINT BAR_PK PRIMARY KEY (ID));



CREATE TABLE RESTAURANTES
( 
  ID NUMBER,
  CAPACIDAD NUMBER,
  ESTILO VARCHAR2(255),
  NOMBRE VARCHAR2(255),
  HOTELID NUMBER,
  CONSTRAINT RESTAURANTE_PK PRIMARY KEY (ID));



CREATE TABLE SUPERMERCADOS
( 
  ID NUMBER,
  NOMBRE VARCHAR2(255),
  HOTELID NUMBER,
  CONSTRAINT SUPERMERCADO_PK PRIMARY KEY (ID));



CREATE TABLE TIENDAS
( 
  ID NUMBER,
  NOMBRE VARCHAR2(255),
  HOTELID NUMBER,
  CONSTRAINT TIENDAS_PK PRIMARY KEY (ID));


---------------ALTER TABLES (FKS)--------------------------------------

  ALTER TABLE SERVICIORESERVAS
ADD CONSTRAINT fk_RESERVA_HABITACION
    FOREIGN KEY (IDHABITACION)
    REFERENCES HABITACIONES(ID)
    ON DELETE CASCADE
ENABLE;

ALTER TABLE SERVICIORESERVAS
ADD CONSTRAINT fk_RESERVA_SPA
    FOREIGN KEY (IDSPA)
    REFERENCES SPAS(ID)
    ON DELETE CASCADE
ENABLE;

  ALTER TABLE SERVICIORESERVAS
ADD CONSTRAINT fk_RESERVA_SALON
    FOREIGN KEY (IDSALON)
    REFERENCES SALONES(ID)
    ON DELETE CASCADE
ENABLE;

  ALTER TABLE SERVICIORESERVAS
ADD CONSTRAINT fk_RESERVA_LAVANDERIA
    FOREIGN KEY (IDLAVANDERIA)
    REFERENCES LAVANDERIAS(ID)
    ON DELETE CASCADE
ENABLE;


--ALTER TABLE PRODUCTOS
--ADD CONSTRAINT fk_PRODUCTO_RESTAURANTE
--    FOREIGN KEY (RESTAURANTEID)
--    REFERENCES RESTAURANTES(ID)
--    ON DELETE CASCADE
--ENABLE;

--ALTER TABLE PRODUCTOS
--ADD CONSTRAINT fk_PRODUCTO_TIENDA
--    FOREIGN KEY (TIENDAID)
--    REFERENCES TIENDAS(ID)
--    ON DELETE CASCADE
--ENABLE;

--ALTER TABLE PRODUCTOS
--ADD CONSTRAINT fk_PRODUCTO_SUPER
--    FOREIGN KEY (SUPERMERCADOID)
--    REFERENCES SUPERMERCADOS(ID)
--    ON DELETE CASCADE
--ENABLE;

--ALTER TABLE PRODUCTOS
--ADD CONSTRAINT fk_PRODUCTO_BAR
--    FOREIGN KEY (BARID)
--    REFERENCES BARES(ID)
--    ON DELETE CASCADE
--ENABLE;

--ALTER TABLE PRODUCTOS
--ADD CONSTRAINT fk_PRODUCTO_SERVICIOCONSUMO
 --   FOREIGN KEY (SERVICIOCONSUMOID)
 --  REFERENCES SERVICIOSCONSUMO(ID)
--    ON DELETE CASCADE
--ENABLE;


--ALTER TABLE USUARIOS
--ADD CONSTRAINT fk_USUARIO_HOTEL
--    FOREIGN KEY (HOTELID)
--    REFERENCES HOTELES(ID)
--    ON DELETE CASCADE
--ENABLE;

--ALTER TABLE PRODUCTOS
--ADD CONSTRAINT fk_PRODUCTO_REGISTRO
--    FOREIGN KEY (REGISTROID)
--    REFERENCES REGISTROS(ID)
--    ON DELETE CASCADE
--ENABLE;

--ALTER TABLE PRODUCTOS
--ADD CONSTRAINT FK_PRODUCTO_RESERVA
--    FOREIGN KEY (RESERVAID)
 --   REFERENCES RESERVAS(ID)
 --   ON DELETE CASCADE
--ENABLE;


--ALTER TABLE PLANES
--ADD CONSTRAINT fk_PLAN_HOTEL
--    FOREIGN KEY (HOTELID)
--    REFERENCES HOTELES(ID)
--    ON DELETE CASCADE
--ENABLE;

ALTER TABLE RESERVAS
ADD CONSTRAINT fk_RESERVA_HABITACIONS
    FOREIGN KEY (habtacionid)
    REFERENCES HABITACIONES(ID)
    ON DELETE CASCADE
ENABLE;

ALTER TABLE RESERVAS
ADD CONSTRAINT fk_RESERVAS_PLAN
    FOREIGN KEY (PLANESID)
    REFERENCES PLANES(ID)
    ON DELETE CASCADE
ENABLE;

ALTER TABLE RESERVAS
ADD CONSTRAINT fk_RESERVAS_USUARIO
    FOREIGN KEY (USUARIOID)
    REFERENCES USUARIOS(ID)
    ON DELETE CASCADE
ENABLE;

ALTER TABLE HABITACIONES
ADD CONSTRAINT fk_HABITACION_HOTEL
    FOREIGN KEY (HOTELID)
    REFERENCES HOTELES(ID)
    ON DELETE CASCADE
ENABLE;

ALTER TABLE HABITACIONES
ADD CONSTRAINT fk_HABITACION_RESERVA
    FOREIGN KEY (RESERVAID)
    REFERENCES RESERVAS(ID)
    ON DELETE CASCADE
ENABLE;

ALTER TABLE HABITACIONES
ADD CONSTRAINT fk_HABITACION_USUARIO
    FOREIGN KEY (USUARIOID)
    REFERENCES USUARIOS(ID)
    ON DELETE CASCADE
ENABLE;

ALTER TABLE HABITACIONES
ADD CONSTRAINT fk_HABITACION_CONSUMO
    FOREIGN KEY (SERVICIOCONSUMOID)
    REFERENCES SERVICIOSCONSUMO(ID)
    ON DELETE CASCADE
ENABLE;



--  ALTER TABLE UTILERIA
--ADD CONSTRAINT fk_UTILERIA_HABITACION
--    FOREIGN KEY (HABITACIONID)
--    REFERENCES HABITACIONES(ID)
--    ON DELETE CASCADE
--ENABLE;


--ALTER TABLE FACTURAS
--ADD CONSTRAINT fk_FACTURA_RESERVA
--    FOREIGN KEY (RESERVASID)
--    REFERENCES RESERVAS(ID)
--ENABLE;


  ALTER TABLE REGISTROS
ADD CONSTRAINT fk_REGISTRO_RESERVA
    FOREIGN KEY (IDRESERVA)
    REFERENCES RESERVAS(ID)
ENABLE;

ALTER TABLE REGISTROS
ADD CONSTRAINT fk_REGISTRO_USUARIO
    FOREIGN KEY (IDUSUARIO)
    REFERENCES USUARIOS(ID)
ENABLE;


ALTER TABLE SERVICIOSCONSUMO
ADD CONSTRAINT fk_CONSUMO_HABITACION
    FOREIGN KEY (IDHABITACION)
    REFERENCES HABITACIONES(ID)
    ON DELETE CASCADE
ENABLE;

ALTER TABLE SERVICIOSCONSUMO
ADD CONSTRAINT fk_CONSUMO_PRODUCTO
    FOREIGN KEY (IDPRODUCTO)
    REFERENCES PRODUCTOS(ID)
    ON DELETE CASCADE
ENABLE;



ALTER TABLE PISCINA
ADD CONSTRAINT FK_PISCINA_HOTEL
    FOREIGN KEY (HOTELID)
    REFERENCES HOTELES(ID)
ENABLE;





ALTER TABLE INTERNET
ADD CONSTRAINT fk_a_hotel
    FOREIGN KEY (HOTELID)
    REFERENCES HOTELES(ID)
ENABLE;



ALTER TABLE GIMNASIO
ADD CONSTRAINT fk_GIM_HOTEL
    FOREIGN KEY (HOTELID)
    REFERENCES HOTELES(ID)
ENABLE;


ALTER TABLE BARES
ADD CONSTRAINT FK_BAR_HOTEL
    FOREIGN KEY (HOTELID)
    REFERENCES HOTELES(ID)
ENABLE;  


ALTER TABLE RESTAURANTES
ADD CONSTRAINT FK_RES_HOTEL
    FOREIGN KEY (HOTELID)
    REFERENCES HOTELES(ID)
ENABLE;


ALTER TABLE SUPERMERCADOS
ADD CONSTRAINT FK_SUPER_HOTEL
    FOREIGN KEY (HOTELID)
    REFERENCES HOTELES(ID)
ENABLE; 



ALTER TABLE TIENDAS
ADD CONSTRAINT FK_TIENDA_HOTEL
    FOREIGN KEY (HOTELID)
    REFERENCES HOTELES(ID)
    
ENABLE; 










COMMIT;
